#:import Factory kivy.factory.Factory


WindowManager:
    WelcomeScreen:
    AddPlayersScreen:
    GameplayScreen:
    ResultsScreen:

<WelcomeScreen@Screen>:
    name: "Welcome"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "WELCOME TO SEASON OF WEALTH! PRESS BUTTON BELOW TO START"
        Button:
            text: "START GAME"
            on_release:
                app.root.current = "AddPlayers"
                root.manager.transition.direction = "left"

<AddPlayersScreen@Screen>:
    name: "AddPlayers"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "ADD PLAYERS"
        BoxLayout:
            Button:
                text: "Add player (now press this to proceed)"
                on_release:
                    app.root.current = "Gameplay"
                    root.manager.transition.direction = "left"
            Button:
                text: "Go back"
                on_release:
                    app.root.current = "Welcome"
                    root.manager.transition.direction = "right"
            Button:
                text: "Add player"
                on_release:
                    app.ShowAddPlayerPopup()

<GameplayScreen@Screen>:
    name: "Gameplay"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "GAMEPLAY"
        BoxLayout:
            Button:
                text: "NEXT PLAYER TURN (now press this to proceed)"
                on_release:
                    app.root.current = "Results"
                    root.manager.transition.direction = "left"
            Button:
                text: "Go back to adding players"
                on_release:
                    app.root.current = "AddPlayers"
                    root.manager.transition.direction = "right"

<ResultsScreen@Screen>:
    name: "Results"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "WINNER!"
        BoxLayout:
            Button:
                text: "GO BACK TO STARTING SCREEN"
                on_release:
                    app.root.current = "Welcome"
                    root.manager.transition.direction = "left"
            Button:
                text: "CONTINUE PLAYING GAME"
                on_release:
                    app.root.current = "Gameplay"
                    root.manager.transition.direction = "right"

<AddPlayerPopup>
    title: "popup test"
    auto_dismiss: False #so cannot just tap anywhere to remove

    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            cols : 2
            Label:
                text:"Name"
            TextInput:
                id: name_input
                multiline: False # Set to False for single-line input like a username
            Label:
                text:"Income"
            TextInput:
                id: income_input
                multiline: False # Set to False for single-line input like a username
            Label:
                text:"Cash"
            TextInput:
                id: cash_input
                multiline: False # Set to False for single-line input like a username

        Button:
            text: "Add Player!"
            on_release: root.SavePlayerInfo() #clear textinput window if invalid entry is found
        Button:
            text: "Exit popup"
            on_release: root.dismiss() #to exit popup without adding player

